<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Custom Booth Banners (KR + EN)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@700&display=swap" rel="stylesheet">
  <style>
    body { text-align: center; padding: 50px; font-family: 'Poppins', sans-serif; }
    .banner-set { display: flex; justify-content: center; gap: 50px; flex-wrap: wrap; margin-bottom: 60px; }
    .column-set { display: flex; flex-direction: column; gap: 30px; }
    .preview-box { text-align: center; width: 240px; }
    canvas { border: 1px solid #ccc; margin-bottom: 10px; }
    canvas.square { width: 240px; height: 240px; }  /* resized from 324px */
    canvas.wide { width: 728px; height: 90px; }
    h3 { font-size: 18px; margin-bottom: 8px; }
    h3 a { font-size: 16px; margin-left: 10px; color: #4CAF50; text-decoration: underline; cursor: pointer; display: none; }
  </style>
</head>
<body>
  <h1>Download Your Booth Banners (KR + EN)</h1>
  <input type="text" id="boothInput" placeholder="부스 번호 입력" style="padding:10px; font-size:16px;">
  <br><br>
  <button onclick="generateBanners()" style="padding:10px 20px; font-size:16px;">Generate All Banners</button>
  <div id="previewContainer"></div>

  <script>
    const sets = [
      { name: 'CPHI', font: 'Poppins', base: 'cphi' },
      { name: 'bioLIVE', font: 'Poppins', base: 'bio' },
      { name: 'PMEC', font: 'Poppins', base: 'pmec' },
      { name: 'Hi Korea', font: '"Nunito Sans"', base: 'hi' }
    ];

    const previewContainer = document.getElementById('previewContainer');

    window.onload = async function () {
      sets.forEach((set, i) => {
        const group = document.createElement('div');
        group.className = 'banner-set';
        group.innerHTML = `
          <div class="column-set">
            <div class="preview-box">
              <h3>${set.name} (728x90)<a id="downloadLink${i*4+1}">Download</a></h3>
              <canvas class="wide" id="canvas${i*4+1}" width="728" height="90"></canvas>
            </div>
            <div class="preview-box">
              <h3>${set.name} 국문 (728x90)<a id="downloadLink${i*4+3}">Download</a></h3>
              <canvas class="wide" id="canvas${i*4+3}" width="728" height="90"></canvas>
            </div>
          </div>
          <div class="preview-box">
            <h3>${set.name} (1080x1080)<a id="downloadLink${i*4+2}">Download</a></h3>
            <canvas class="square" id="canvas${i*4+2}" width="1080" height="1080"></canvas>
          </div>
          <div class="preview-box">
            <h3>${set.name} 국문 (1080x1080)<a id="downloadLink${i*4+4}">Download</a></h3>
            <canvas class="square" id="canvas${i*4+4}" width="1080" height="1080"></canvas>
          </div>
        `;
        previewContainer.appendChild(group);
      });

      const images = await Promise.all(
        sets.flatMap(set => [
          loadImage(set.base + '-banner2-en.png'),
          loadImage(set.base + '-banner1-en.png'),
          loadImage(set.base + '-banner2-kr.png'),
          loadImage(set.base + '-banner1-kr.png')
        ])
      );

      images.forEach((img, i) => {
        const canvas = document.getElementById('canvas' + (i + 1));
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      });
    };

    function loadImage(src) {
      return new Promise(resolve => {
        const img = new Image();
        img.src = src;
        img.onload = () => resolve(img);
      });
    }

    async function generateBanners() {
      const booth = document.getElementById("boothInput").value;
      await document.fonts.ready;

      sets.forEach((set, i) => {
        const enWide = document.getElementById('canvas' + (i * 4 + 1));
        const enSquare = document.getElementById('canvas' + (i * 4 + 2));
        const krWide = document.getElementById('canvas' + (i * 4 + 3));
        const krSquare = document.getElementById('canvas' + (i * 4 + 4));
        const font = set.font;

        drawWide(enWide, "en", booth, font);
        drawSquare(enSquare, "en", booth, font);
        drawWide(krWide, "kr", booth, "'Noto Sans KR'");
        drawSquare(krSquare, "kr", booth, "'Noto Sans KR'");

        for (let j = 1; j <= 4; j++) {
          const canvas = document.getElementById('canvas' + (i * 4 + j));
          const link = document.getElementById('downloadLink' + (i * 4 + j));
          link.href = canvas.toDataURL();
          link.download = set.base + '-' + j + '.png';
          link.style.display = 'inline';
        }
      });
    }

    function drawWide(canvas, lang, booth, font) {
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#FFFFFF";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.font = `700 20px ${font}`;
      ctx.fillText(lang === 'en' ? "Visit our booth at" : "부스를 방문해주세요!", canvas.width / 2, 30);
      ctx.font = `700 30px ${font}`;
      ctx.fillText(booth, canvas.width / 2, 65);
    }

    function drawSquare(canvas, lang, booth, font) {
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#FFFFFF";
      ctx.textAlign = "right";
      ctx.textBaseline = "middle";
      ctx.font = `700 80px ${font}`;
      ctx.fillText(lang === 'en' ? "Visit us" : "방문해주세요!", 980, 440);
      ctx.font = `700 100px ${font}`;
      ctx.fillText("Booth " + booth, 980, 560);
    }
  </script>
</body>
</html>

